<% /* Set the title and other variables for the layout */ %>
<% title = `Edit ${monster.name} - Monster Details` %>

<style>
.form-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    background: rgba(30, 37, 50, 0.5);
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.form-title {
    text-align: center;
    margin-bottom: 2rem;
}

.form-section {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 12px;
}

.form-section-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    color: var(--accent-color, #d4b3ff);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.form-control {
    width: 100%;
    padding: 0.75rem;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    color: #fff;
    font-size: 1rem;
}

.form-control:focus {
    outline: none;
    border-color: var(--accent-color, #d4b3ff);
    box-shadow: 0 0 0 2px rgba(212, 179, 255, 0.2);
}

.form-control:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

textarea.form-control {
    min-height: 120px;
    resize: vertical;
}

.form-actions {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
}

.btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-primary {
    background-color: var(--accent-color, #d4b3ff);
    color: #000;
}

.btn-primary:hover {
    background-color: #c49ef7;
}

.btn-secondary {
    background-color: rgba(255, 255, 255, 0.1);
    color: #fff;
}

.btn-secondary:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.btn-danger {
    background-color: #e74c3c;
    color: #fff;
}

.btn-danger:hover {
    background-color: #c0392b;
}

.form-note {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.6);
    margin-top: 0.5rem;
}

.form-note.warning {
    color: #e74c3c;
}

@media (max-width: 768px) {
    .form-grid {
        grid-template-columns: 1fr;
    }

    .form-actions {
        flex-direction: column;
        gap: 1rem;
    }

    .btn {
        width: 100%;
    }
}
</style>

<div class="container mt-8 mb-12">
    <div class="form-container">
        <h1 class="form-title text-4xl font-display font-bold">Edit Monster: <%= monster.name %></h1>

        <form action="/trainers/<%= trainer.id %>/monsters/<%= monster.mon_id %>/update" method="POST">
            <!-- Basic Information Section -->
            <div class="form-section">
                <h2 class="form-section-title">Basic Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" id="name" name="name" class="form-control" value="<%= monster.name %>" required>
                    </div>

                    <div class="form-group">
                        <label for="level">Level</label>
                        <input type="number" id="level" name="level" class="form-control" value="<%= monster.level || '' %>" disabled>
                        <p class="form-note">Level cannot be edited directly</p>
                    </div>

                    <div class="form-group">
                        <label for="box_number">Box Number</label>
                        <select id="box_number" name="box_number" class="form-control">
                            <option value="-1" <%= monster.box_number === -1 ? 'selected' : '' %>>Battle Box</option>
                            <option value="2" <%= monster.box_number === 2 ? 'selected' : '' %>>Box 2</option>
                            <option value="3" <%= monster.box_number === 3 ? 'selected' : '' %>>Box 3</option>
                            <option value="4" <%= monster.box_number === 4 ? 'selected' : '' %>>Box 4</option>
                            <option value="5" <%= monster.box_number === 5 ? 'selected' : '' %>>Box 5</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Species and Types Section (Read-only) -->
            <div class="form-section">
                <h2 class="form-section-title">Species and Types</h2>
                <p class="form-note mb-4">These values cannot be edited directly as they define the monster's core identity.</p>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="species1">Primary Species</label>
                        <input type="text" id="species1" name="species1" class="form-control" value="<%= monster.species1 || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="species2">Secondary Species</label>
                        <input type="text" id="species2" name="species2" class="form-control" value="<%= monster.species2 || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="species3">Tertiary Species</label>
                        <input type="text" id="species3" name="species3" class="form-control" value="<%= monster.species3 || '' %>" disabled>
                    </div>
                </div>

                <h3 class="text-xl font-display font-bold mt-4 mb-3">Types</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="type1">Type 1</label>
                        <input type="text" id="type1" name="type1" class="form-control" value="<%= monster.type1 || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="type2">Type 2</label>
                        <input type="text" id="type2" name="type2" class="form-control" value="<%= monster.type2 || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="type3">Type 3</label>
                        <input type="text" id="type3" name="type3" class="form-control" value="<%= monster.type3 || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="type4">Type 4</label>
                        <input type="text" id="type4" name="type4" class="form-control" value="<%= monster.type4 || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="type5">Type 5</label>
                        <input type="text" id="type5" name="type5" class="form-control" value="<%= monster.type5 || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="attribute">Attribute</label>
                        <input type="text" id="attribute" name="attribute" class="form-control" value="<%= monster.attribute || '' %>" disabled>
                    </div>
                </div>
            </div>

            <!-- Stats Section (Read-only) -->
            <div class="form-section">
                <h2 class="form-section-title">Stats</h2>
                <p class="form-note mb-4">Stats cannot be edited directly. They are determined by the monster's level and training.</p>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="hp_total">HP</label>
                        <input type="number" id="hp_total" name="hp_total" class="form-control" value="<%= monster.hp_total || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="atk_total">Attack</label>
                        <input type="number" id="atk_total" name="atk_total" class="form-control" value="<%= monster.atk_total || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="def_total">Defense</label>
                        <input type="number" id="def_total" name="def_total" class="form-control" value="<%= monster.def_total || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="spa_total">Sp. Attack</label>
                        <input type="number" id="spa_total" name="spa_total" class="form-control" value="<%= monster.spa_total || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="spd_total">Sp. Defense</label>
                        <input type="number" id="spd_total" name="spd_total" class="form-control" value="<%= monster.spd_total || '' %>" disabled>
                    </div>

                    <div class="form-group">
                        <label for="spe_total">Speed</label>
                        <input type="number" id="spe_total" name="spe_total" class="form-control" value="<%= monster.spe_total || '' %>" disabled>
                    </div>
                </div>
            </div>

            <!-- Moves Section -->
            <div class="form-section">
                <h2 class="form-section-title">Moves</h2>

                <div class="form-group">
                    <label for="moveset">Moveset</label>
                    <textarea id="moveset" name="moveset" class="form-control" placeholder="Enter moves separated by commas or new lines"><%= monster.moveset || '' %></textarea>
                    <p class="form-note">Enter moves separated by commas or new lines (e.g., "Tackle, Growl, Ember")</p>
                </div>
            </div>

            <!-- Personal Information Section -->
            <div class="form-section">
                <h2 class="form-section-title">Personal Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender" class="form-control">
                            <option value="" <%= !monster.gender ? 'selected' : '' %>>None</option>
                            <option value="Male" <%= monster.gender === 'Male' ? 'selected' : '' %>>Male</option>
                            <option value="Female" <%= monster.gender === 'Female' ? 'selected' : '' %>>Female</option>
                            <option value="Non-binary" <%= monster.gender === 'Non-binary' ? 'selected' : '' %>>Non-binary</option>
                            <option value="Unknown" <%= monster.gender === 'Unknown' ? 'selected' : '' %>>Unknown</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="pronouns">Pronouns</label>
                        <input type="text" id="pronouns" name="pronouns" class="form-control" value="<%= monster.pronouns || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="nature">Nature</label>
                        <input type="text" id="nature" name="nature" class="form-control" value="<%= monster.nature || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="characteristic">Characteristic</label>
                        <input type="text" id="characteristic" name="characteristic" class="form-control" value="<%= monster.characteristic || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="friendship">Friendship</label>
                        <input type="number" id="friendship" name="friendship" class="form-control" value="<%= monster.friendship || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="fav_berry">Favorite Berry</label>
                        <input type="text" id="fav_berry" name="fav_berry" class="form-control" value="<%= monster.fav_berry || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="held_item">Held Item</label>
                        <input type="text" id="held_item" name="held_item" class="form-control" value="<%= monster.held_item || '' %>">
                    </div>
                </div>
            </div>

            <!-- Acquisition Information -->
            <div class="form-section">
                <h2 class="form-section-title">Acquisition Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="acquired">How Acquired</label>
                        <input type="text" id="acquired" name="acquired" class="form-control" value="<%= monster.acquired || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="poke_ball">Poké Ball</label>
                        <input type="text" id="poke_ball" name="poke_ball" class="form-control" value="<%= monster.poke_ball || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="date_met">Date Met</label>
                        <input type="text" id="date_met" name="date_met" class="form-control" value="<%= monster.date_met || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="where_met">Where Met</label>
                        <input type="text" id="where_met" name="where_met" class="form-control" value="<%= monster.where_met || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="height">Height</label>
                        <input type="text" id="height" name="height" class="form-control" value="<%= monster.height || '' %>">
                    </div>
                </div>
            </div>

            <!-- Special Features Section -->
            <div class="form-section">
                <h2 class="form-section-title">Special Features</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="shiny">Shiny</label>
                        <select id="shiny" name="shiny" class="form-control">
                            <option value="0" <%= !monster.shiny ? 'selected' : '' %>>No</option>
                            <option value="1" <%= monster.shiny ? 'selected' : '' %>>Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="alpha">Alpha</label>
                        <select id="alpha" name="alpha" class="form-control">
                            <option value="0" <%= !monster.alpha ? 'selected' : '' %>>No</option>
                            <option value="1" <%= monster.alpha ? 'selected' : '' %>>Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="shadow">Shadow</label>
                        <select id="shadow" name="shadow" class="form-control">
                            <option value="0" <%= !monster.shadow ? 'selected' : '' %>>No</option>
                            <option value="1" <%= monster.shadow ? 'selected' : '' %>>Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="paradox">Paradox</label>
                        <select id="paradox" name="paradox" class="form-control">
                            <option value="0" <%= !monster.paradox ? 'selected' : '' %>>No</option>
                            <option value="1" <%= monster.paradox ? 'selected' : '' %>>Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="paradox_type">Paradox Type</label>
                        <select id="paradox_type" name="paradox_type" class="form-control" <%= !monster.paradox ? 'disabled' : '' %>>
                            <option value="" <%= !monster.paradox_type ? 'selected' : '' %>>None</option>
                            <option value="Future" <%= monster.paradox_type === 'Future' ? 'selected' : '' %>>Future</option>
                            <option value="Past" <%= monster.paradox_type === 'Past' ? 'selected' : '' %>>Past</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="pokerus">Pokérus</label>
                        <select id="pokerus" name="pokerus" class="form-control">
                            <option value="0" <%= !monster.pokerus ? 'selected' : '' %>>No</option>
                            <option value="1" <%= monster.pokerus ? 'selected' : '' %>>Yes</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Mega Evolution Section -->
            <div class="form-section">
                <h2 class="form-section-title">Mega Evolution</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="mega_stone">Mega Stone</label>
                        <input type="text" id="mega_stone" name="mega_stone" class="form-control" value="<%= monster.mega_stone || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="mega_image">Mega Evolution Image URL</label>
                        <input type="text" id="mega_image" name="mega_image" class="form-control" value="<%= monster.mega_image || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="mega_ability">Mega Ability</label>
                        <input type="text" id="mega_ability" name="mega_ability" class="form-control" value="<%= monster.mega_ability || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="mega_stat_bonus">Mega Stat Bonus</label>
                        <input type="text" id="mega_stat_bonus" name="mega_stat_bonus" class="form-control" value="<%= monster.mega_stat_bonus || '' %>">
                    </div>
                </div>

                <h3 class="text-xl font-display font-bold mt-4 mb-3">Mega Types</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="mega_type1">Mega Type 1</label>
                        <select id="mega_type1" name="mega_type1" class="form-control">
                            <option value="" <%= !monster.mega_type1 ? 'selected' : '' %>>None</option>
                            <option value="Normal" <%= monster.mega_type1 === 'Normal' ? 'selected' : '' %>>Normal</option>
                            <option value="Fire" <%= monster.mega_type1 === 'Fire' ? 'selected' : '' %>>Fire</option>
                            <option value="Water" <%= monster.mega_type1 === 'Water' ? 'selected' : '' %>>Water</option>
                            <option value="Electric" <%= monster.mega_type1 === 'Electric' ? 'selected' : '' %>>Electric</option>
                            <option value="Grass" <%= monster.mega_type1 === 'Grass' ? 'selected' : '' %>>Grass</option>
                            <option value="Ice" <%= monster.mega_type1 === 'Ice' ? 'selected' : '' %>>Ice</option>
                            <option value="Fighting" <%= monster.mega_type1 === 'Fighting' ? 'selected' : '' %>>Fighting</option>
                            <option value="Poison" <%= monster.mega_type1 === 'Poison' ? 'selected' : '' %>>Poison</option>
                            <option value="Ground" <%= monster.mega_type1 === 'Ground' ? 'selected' : '' %>>Ground</option>
                            <option value="Flying" <%= monster.mega_type1 === 'Flying' ? 'selected' : '' %>>Flying</option>
                            <option value="Psychic" <%= monster.mega_type1 === 'Psychic' ? 'selected' : '' %>>Psychic</option>
                            <option value="Bug" <%= monster.mega_type1 === 'Bug' ? 'selected' : '' %>>Bug</option>
                            <option value="Rock" <%= monster.mega_type1 === 'Rock' ? 'selected' : '' %>>Rock</option>
                            <option value="Ghost" <%= monster.mega_type1 === 'Ghost' ? 'selected' : '' %>>Ghost</option>
                            <option value="Dragon" <%= monster.mega_type1 === 'Dragon' ? 'selected' : '' %>>Dragon</option>
                            <option value="Dark" <%= monster.mega_type1 === 'Dark' ? 'selected' : '' %>>Dark</option>
                            <option value="Steel" <%= monster.mega_type1 === 'Steel' ? 'selected' : '' %>>Steel</option>
                            <option value="Fairy" <%= monster.mega_type1 === 'Fairy' ? 'selected' : '' %>>Fairy</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="mega_type2">Mega Type 2</label>
                        <select id="mega_type2" name="mega_type2" class="form-control">
                            <option value="" <%= !monster.mega_type2 ? 'selected' : '' %>>None</option>
                            <option value="Normal" <%= monster.mega_type2 === 'Normal' ? 'selected' : '' %>>Normal</option>
                            <option value="Fire" <%= monster.mega_type2 === 'Fire' ? 'selected' : '' %>>Fire</option>
                            <option value="Water" <%= monster.mega_type2 === 'Water' ? 'selected' : '' %>>Water</option>
                            <option value="Electric" <%= monster.mega_type2 === 'Electric' ? 'selected' : '' %>>Electric</option>
                            <option value="Grass" <%= monster.mega_type2 === 'Grass' ? 'selected' : '' %>>Grass</option>
                            <option value="Ice" <%= monster.mega_type2 === 'Ice' ? 'selected' : '' %>>Ice</option>
                            <option value="Fighting" <%= monster.mega_type2 === 'Fighting' ? 'selected' : '' %>>Fighting</option>
                            <option value="Poison" <%= monster.mega_type2 === 'Poison' ? 'selected' : '' %>>Poison</option>
                            <option value="Ground" <%= monster.mega_type2 === 'Ground' ? 'selected' : '' %>>Ground</option>
                            <option value="Flying" <%= monster.mega_type2 === 'Flying' ? 'selected' : '' %>>Flying</option>
                            <option value="Psychic" <%= monster.mega_type2 === 'Psychic' ? 'selected' : '' %>>Psychic</option>
                            <option value="Bug" <%= monster.mega_type2 === 'Bug' ? 'selected' : '' %>>Bug</option>
                            <option value="Rock" <%= monster.mega_type2 === 'Rock' ? 'selected' : '' %>>Rock</option>
                            <option value="Ghost" <%= monster.mega_type2 === 'Ghost' ? 'selected' : '' %>>Ghost</option>
                            <option value="Dragon" <%= monster.mega_type2 === 'Dragon' ? 'selected' : '' %>>Dragon</option>
                            <option value="Dark" <%= monster.mega_type2 === 'Dark' ? 'selected' : '' %>>Dark</option>
                            <option value="Steel" <%= monster.mega_type2 === 'Steel' ? 'selected' : '' %>>Steel</option>
                            <option value="Fairy" <%= monster.mega_type2 === 'Fairy' ? 'selected' : '' %>>Fairy</option>
                        </select>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="mega_type3">Mega Type 3</label>
                        <select id="mega_type3" name="mega_type3" class="form-control">
                            <option value="" <%= !monster.mega_type3 ? 'selected' : '' %>>None</option>
                            <option value="Normal" <%= monster.mega_type3 === 'Normal' ? 'selected' : '' %>>Normal</option>
                            <option value="Fire" <%= monster.mega_type3 === 'Fire' ? 'selected' : '' %>>Fire</option>
                            <option value="Water" <%= monster.mega_type3 === 'Water' ? 'selected' : '' %>>Water</option>
                            <option value="Electric" <%= monster.mega_type3 === 'Electric' ? 'selected' : '' %>>Electric</option>
                            <option value="Grass" <%= monster.mega_type3 === 'Grass' ? 'selected' : '' %>>Grass</option>
                            <option value="Ice" <%= monster.mega_type3 === 'Ice' ? 'selected' : '' %>>Ice</option>
                            <option value="Fighting" <%= monster.mega_type3 === 'Fighting' ? 'selected' : '' %>>Fighting</option>
                            <option value="Poison" <%= monster.mega_type3 === 'Poison' ? 'selected' : '' %>>Poison</option>
                            <option value="Ground" <%= monster.mega_type3 === 'Ground' ? 'selected' : '' %>>Ground</option>
                            <option value="Flying" <%= monster.mega_type3 === 'Flying' ? 'selected' : '' %>>Flying</option>
                            <option value="Psychic" <%= monster.mega_type3 === 'Psychic' ? 'selected' : '' %>>Psychic</option>
                            <option value="Bug" <%= monster.mega_type3 === 'Bug' ? 'selected' : '' %>>Bug</option>
                            <option value="Rock" <%= monster.mega_type3 === 'Rock' ? 'selected' : '' %>>Rock</option>
                            <option value="Ghost" <%= monster.mega_type3 === 'Ghost' ? 'selected' : '' %>>Ghost</option>
                            <option value="Dragon" <%= monster.mega_type3 === 'Dragon' ? 'selected' : '' %>>Dragon</option>
                            <option value="Dark" <%= monster.mega_type3 === 'Dark' ? 'selected' : '' %>>Dark</option>
                            <option value="Steel" <%= monster.mega_type3 === 'Steel' ? 'selected' : '' %>>Steel</option>
                            <option value="Fairy" <%= monster.mega_type3 === 'Fairy' ? 'selected' : '' %>>Fairy</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="mega_type4">Mega Type 4</label>
                        <select id="mega_type4" name="mega_type4" class="form-control">
                            <option value="" <%= !monster.mega_type4 ? 'selected' : '' %>>None</option>
                            <option value="Normal" <%= monster.mega_type4 === 'Normal' ? 'selected' : '' %>>Normal</option>
                            <option value="Fire" <%= monster.mega_type4 === 'Fire' ? 'selected' : '' %>>Fire</option>
                            <option value="Water" <%= monster.mega_type4 === 'Water' ? 'selected' : '' %>>Water</option>
                            <option value="Electric" <%= monster.mega_type4 === 'Electric' ? 'selected' : '' %>>Electric</option>
                            <option value="Grass" <%= monster.mega_type4 === 'Grass' ? 'selected' : '' %>>Grass</option>
                            <option value="Ice" <%= monster.mega_type4 === 'Ice' ? 'selected' : '' %>>Ice</option>
                            <option value="Fighting" <%= monster.mega_type4 === 'Fighting' ? 'selected' : '' %>>Fighting</option>
                            <option value="Poison" <%= monster.mega_type4 === 'Poison' ? 'selected' : '' %>>Poison</option>
                            <option value="Ground" <%= monster.mega_type4 === 'Ground' ? 'selected' : '' %>>Ground</option>
                            <option value="Flying" <%= monster.mega_type4 === 'Flying' ? 'selected' : '' %>>Flying</option>
                            <option value="Psychic" <%= monster.mega_type4 === 'Psychic' ? 'selected' : '' %>>Psychic</option>
                            <option value="Bug" <%= monster.mega_type4 === 'Bug' ? 'selected' : '' %>>Bug</option>
                            <option value="Rock" <%= monster.mega_type4 === 'Rock' ? 'selected' : '' %>>Rock</option>
                            <option value="Ghost" <%= monster.mega_type4 === 'Ghost' ? 'selected' : '' %>>Ghost</option>
                            <option value="Dragon" <%= monster.mega_type4 === 'Dragon' ? 'selected' : '' %>>Dragon</option>
                            <option value="Dark" <%= monster.mega_type4 === 'Dark' ? 'selected' : '' %>>Dark</option>
                            <option value="Steel" <%= monster.mega_type4 === 'Steel' ? 'selected' : '' %>>Steel</option>
                            <option value="Fairy" <%= monster.mega_type4 === 'Fairy' ? 'selected' : '' %>>Fairy</option>
                        </select>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="mega_type5">Mega Type 5</label>
                        <select id="mega_type5" name="mega_type5" class="form-control">
                            <option value="" <%= !monster.mega_type5 ? 'selected' : '' %>>None</option>
                            <option value="Normal" <%= monster.mega_type5 === 'Normal' ? 'selected' : '' %>>Normal</option>
                            <option value="Fire" <%= monster.mega_type5 === 'Fire' ? 'selected' : '' %>>Fire</option>
                            <option value="Water" <%= monster.mega_type5 === 'Water' ? 'selected' : '' %>>Water</option>
                            <option value="Electric" <%= monster.mega_type5 === 'Electric' ? 'selected' : '' %>>Electric</option>
                            <option value="Grass" <%= monster.mega_type5 === 'Grass' ? 'selected' : '' %>>Grass</option>
                            <option value="Ice" <%= monster.mega_type5 === 'Ice' ? 'selected' : '' %>>Ice</option>
                            <option value="Fighting" <%= monster.mega_type5 === 'Fighting' ? 'selected' : '' %>>Fighting</option>
                            <option value="Poison" <%= monster.mega_type5 === 'Poison' ? 'selected' : '' %>>Poison</option>
                            <option value="Ground" <%= monster.mega_type5 === 'Ground' ? 'selected' : '' %>>Ground</option>
                            <option value="Flying" <%= monster.mega_type5 === 'Flying' ? 'selected' : '' %>>Flying</option>
                            <option value="Psychic" <%= monster.mega_type5 === 'Psychic' ? 'selected' : '' %>>Psychic</option>
                            <option value="Bug" <%= monster.mega_type5 === 'Bug' ? 'selected' : '' %>>Bug</option>
                            <option value="Rock" <%= monster.mega_type5 === 'Rock' ? 'selected' : '' %>>Rock</option>
                            <option value="Ghost" <%= monster.mega_type5 === 'Ghost' ? 'selected' : '' %>>Ghost</option>
                            <option value="Dragon" <%= monster.mega_type5 === 'Dragon' ? 'selected' : '' %>>Dragon</option>
                            <option value="Dark" <%= monster.mega_type5 === 'Dark' ? 'selected' : '' %>>Dark</option>
                            <option value="Steel" <%= monster.mega_type5 === 'Steel' ? 'selected' : '' %>>Steel</option>
                            <option value="Fairy" <%= monster.mega_type5 === 'Fairy' ? 'selected' : '' %>>Fairy</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="mega_type6">Mega Type 6</label>
                        <select id="mega_type6" name="mega_type6" class="form-control">
                            <option value="" <%= !monster.mega_type6 ? 'selected' : '' %>>None</option>
                            <option value="Normal" <%= monster.mega_type6 === 'Normal' ? 'selected' : '' %>>Normal</option>
                            <option value="Fire" <%= monster.mega_type6 === 'Fire' ? 'selected' : '' %>>Fire</option>
                            <option value="Water" <%= monster.mega_type6 === 'Water' ? 'selected' : '' %>>Water</option>
                            <option value="Electric" <%= monster.mega_type6 === 'Electric' ? 'selected' : '' %>>Electric</option>
                            <option value="Grass" <%= monster.mega_type6 === 'Grass' ? 'selected' : '' %>>Grass</option>
                            <option value="Ice" <%= monster.mega_type6 === 'Ice' ? 'selected' : '' %>>Ice</option>
                            <option value="Fighting" <%= monster.mega_type6 === 'Fighting' ? 'selected' : '' %>>Fighting</option>
                            <option value="Poison" <%= monster.mega_type6 === 'Poison' ? 'selected' : '' %>>Poison</option>
                            <option value="Ground" <%= monster.mega_type6 === 'Ground' ? 'selected' : '' %>>Ground</option>
                            <option value="Flying" <%= monster.mega_type6 === 'Flying' ? 'selected' : '' %>>Flying</option>
                            <option value="Psychic" <%= monster.mega_type6 === 'Psychic' ? 'selected' : '' %>>Psychic</option>
                            <option value="Bug" <%= monster.mega_type6 === 'Bug' ? 'selected' : '' %>>Bug</option>
                            <option value="Rock" <%= monster.mega_type6 === 'Rock' ? 'selected' : '' %>>Rock</option>
                            <option value="Ghost" <%= monster.mega_type6 === 'Ghost' ? 'selected' : '' %>>Ghost</option>
                            <option value="Dragon" <%= monster.mega_type6 === 'Dragon' ? 'selected' : '' %>>Dragon</option>
                            <option value="Dark" <%= monster.mega_type6 === 'Dark' ? 'selected' : '' %>>Dark</option>
                            <option value="Steel" <%= monster.mega_type6 === 'Steel' ? 'selected' : '' %>>Steel</option>
                            <option value="Fairy" <%= monster.mega_type6 === 'Fairy' ? 'selected' : '' %>>Fairy</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Biography Section -->
            <div class="form-section">
                <h2 class="form-section-title">Biography</h2>



                <div class="form-group">
                    <label for="tldr">TL;DR</label>
                    <textarea id="tldr" name="tldr" class="form-control"><%= monster.tldr || '' %></textarea>
                    <p class="form-note">A brief summary of your monster's character</p>
                </div>

                <div class="form-group">
                    <label for="bio">Full Biography</label>
                    <textarea id="bio" name="bio" class="form-control" rows="8"><%= monster.bio || '' %></textarea>
                </div>
            </div>

            <!-- Appearance Section -->
            <div class="form-section">
                <h2 class="form-section-title">Appearance</h2>

                <div class="form-group">
                    <label for="img_link">Image URL</label>
                    <input type="text" id="img_link" name="img_link" class="form-control" value="<%= monster.img_link || '' %>">
                    <p class="form-note">Direct link to an image (e.g., https://example.com/image.jpg)</p>
                </div>

                <% if (monster.img_link) { %>
                <div class="mt-4">
                    <p class="mb-2">Current Image:</p>
                    <img src="<%= monster.img_link %>" alt="<%= monster.name %>" style="max-width: 300px; max-height: 300px; border-radius: 8px;">
                </div>
                <% } %>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <a href="/trainers/<%= trainer.id %>/monsters/<%= monster.mon_id %>" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>

<script>
    // Enable/disable paradox type based on paradox selection
    document.getElementById('paradox').addEventListener('change', function() {
        const paradoxTypeSelect = document.getElementById('paradox_type');
        paradoxTypeSelect.disabled = this.value === '0';
    });
</script>
