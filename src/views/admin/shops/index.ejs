<% /* Set the title and other variables for the layout */ %>
<% title = 'Shop Management' %>

<style>
.alert {
    padding: 1rem;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
}

.alert-success {
    background-color: rgba(52, 211, 153, 0.2);
    border: 1px solid rgba(52, 211, 153, 0.5);
    color: #10b981;
}

.alert-error {
    background-color: rgba(239, 68, 68, 0.2);
    border: 1px solid rgba(239, 68, 68, 0.5);
    color: #ef4444;
}

.tab-container {
    margin-top: 2rem;
}

.tab-buttons {
    display: flex;
    border-bottom: 1px solid var(--divider-color);
    margin-bottom: 1.5rem;
    overflow-x: auto;
}

.tab-button {
    padding: 0.75rem 1.5rem;
    background: none;
    border: none;
    color: var(--text-color);
    cursor: pointer;
    font-weight: 500;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}

.tab-button:hover {
    color: var(--accent-color);
}

.tab-button.active {
    color: var(--accent-color);
    border-bottom-color: var(--accent-color);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.shop-card {
    background-color: var(--card-background);
    border-radius: 0.5rem;
    overflow: hidden;
    margin-bottom: 1.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
}

.shop-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
}

.shop-card-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--divider-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.shop-card-body {
    padding: 1.5rem;
}

.shop-card-footer {
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--divider-color);
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
}

.shop-image {
    width: 100%;
    height: 150px;
    object-fit: cover;
}

.shop-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    background-color: var(--nav-background);
    margin-right: 0.5rem;
}

.shop-stats {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
}

.shop-stat {
    background-color: var(--nav-background);
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-input {
    width: 100%;
    padding: 0.75rem;
    background-color: var(--input-background);
    border: 1px solid var(--divider-color);
    border-radius: 0.375rem;
    color: var(--text-color);
}

.form-input:focus {
    outline: none;
    border-color: var(--accent-color);
}

.form-select {
    width: 100%;
    padding: 0.75rem;
    background-color: var(--input-background);
    border: 1px solid var(--divider-color);
    border-radius: 0.375rem;
    color: var(--text-color);
}

.form-textarea {
    width: 100%;
    padding: 0.75rem;
    background-color: var(--input-background);
    border: 1px solid var(--divider-color);
    border-radius: 0.375rem;
    color: var(--text-color);
    min-height: 100px;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 2rem;
}

.grid-cols-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
}

@media (max-width: 768px) {
    .grid-cols-2 {
        grid-template-columns: 1fr;
    }
}
</style>

<div class="mt-20 mb-8">
    <h1 class="text-4xl font-display font-bold text-center mb-8">Shop Management</h1>
    <% if (typeof message !== 'undefined' && message) { %>
    <div class="alert alert-<%= messageType || 'success' %> text-center mb-8">
        <%= message %>
    </div>
    <% } %>
</div>

<main class="container mx-auto px-4 pb-16">
    <div class="card mb-8">
        <div class="card-header">
            <h2 class="text-xl font-bold">Shop Management Dashboard</h2>
        </div>
        <div class="card-body">
            <p class="mb-4">Manage shop configurations and inventories for the game.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="card">
                    <div class="card-header">
                        <h2 class="text-xl font-bold">Shop Configurations</h2>
                    </div>
                    <div class="card-body">
                        <p>Manage shop settings, categories, and pricing</p>
                        <a href="/admin/shops/config" class="btn-primary mt-4 block text-center">Manage Configurations</a>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="text-xl font-bold">Shop Inventories</h2>
                    </div>
                    <div class="card-body">
                        <p>Manage daily shop items and restock shops</p>
                        <a href="/admin/shops/inventory" class="btn-primary mt-4 block text-center">Manage Inventories</a>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="text-xl font-bold">Restock All Shops</h2>
                    </div>
                    <div class="card-body">
                        <p>Force a restock of all shop inventories</p>
                        <a href="/admin/shops/restock-all" class="btn-primary mt-4 block text-center">Restock All Shops</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h2 class="text-xl font-bold">Quick Actions</h2>
        </div>
        <div class="card-body">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <a href="/admin/shops/config/new" class="btn-primary block text-center py-3">
                    <i class="fas fa-plus mr-2"></i> Create New Shop
                </a>
                <a href="/admin/dashboard" class="btn-secondary block text-center py-3">
                    <i class="fas fa-arrow-left mr-2"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tab functionality
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabId = button.getAttribute('data-tab');
            
            // Remove active class from all buttons and contents
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Add active class to current button and content
            button.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });
});
</script>
