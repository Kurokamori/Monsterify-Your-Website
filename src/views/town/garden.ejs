<div class="container mx-auto px-4 mt-6">
    <img src="https://i.imgur.com/Z5dNHXv.jpeg" alt="Garden Banner" class="location-banner w-full object-cover rounded-lg shadow-lg">
    <div class="absolute inset-0 bg-gradient-to-t from-black/90 to-transparent/30"></div>
    <div class="absolute inset-0 flex flex-col justify-end items-center pb-4">
      <h1 class="text-3xl font-display font-bold text-center mb-1 text-white text-shadow-xl">Garden</h1>
      <p class="text-center text-sm mb-2 max-w-2xl mx-auto text-gray-200">Welcome to the garden! The plants need your care and attention.</p>
  </div>

  <div class="max-w-4xl mx-auto mt-8">
    <div class="bg-card rounded-lg p-6 shadow-lg">
      <h2 class="text-xl font-display font-bold mb-4">Garden Activities</h2>
      <p class="text-gray-300 mb-6">Choose an activity to perform in the garden:</p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <button id="tend-garden" class="btn-primary text-center py-3 px-6 rounded-lg">
          <i class="fas fa-seedling mr-2"></i> Tend Garden
        </button>
        <a href="/town/visit/garden/harvest" class="btn-primary text-center py-3 px-6 rounded-lg inline-block">
          <i class="fas fa-leaf mr-2"></i> Harvest Garden
        </a>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const tendButton = document.getElementById('tend-garden');

          tendButton.addEventListener('click', async function() {
            try {
              // Disable the button to prevent multiple clicks
              tendButton.disabled = true;
              tendButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Starting...';

              // Start the activity session
              const response = await fetch('/town/visit/start-activity', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                  location: 'garden',
                  activity: 'tend'
                })
              });

              const data = await response.json();

              if (data.success) {
                // Redirect to the activity session page
                window.location.href = data.redirect;
              } else {
                alert('Error starting activity: ' + data.message);
                tendButton.disabled = false;
                tendButton.innerHTML = '<i class="fas fa-seedling mr-2"></i> Tend Garden';
              }
            } catch (error) {
              console.error('Error starting activity:', error);
              alert('Error starting activity. Please try again.');
              tendButton.disabled = false;
              tendButton.innerHTML = '<i class="fas fa-seedling mr-2"></i> Tend Garden';
            }
          });
        });
      </script>
    </div>
  </div>
</div>

<style>
  .bg-card {
    background-color: var(--card-bg);
  }

  .btn-primary {
    background-color: var(--accent-color);
    color: var(--background-color);
    font-weight: 500;
    transition: all 0.2s;
  }

  .btn-primary:hover {
    background-color: var(--accent-hover);
    transform: translateY(-2px);
  }

  .text-shadow-xl {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
  }
</style>

