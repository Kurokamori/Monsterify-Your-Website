<% /* Set the title and other variables for the layout */ %>
<% title = title || 'Fakemon Details' %>

<% /* Define the styles for this page */ %>
<style>
    .full-width-section {
        width: 100vw;
        position: relative;
        left: 50%;
        right: 50%;
        margin-left: -50vw;
        margin-right: -50vw;
        padding: 2rem 0;
        background-image: linear-gradient(to bottom, rgba(30, 37, 50, 0.8), rgba(17, 19, 25, 0.9));
    }

    .title-container {
        text-align: center;
        margin: 0;
    }

    .main-header {
        color: #ffffff;
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .decorative-lines {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin: 1rem auto;
    }

    .decorative-lines span {
        display: block;
        height: 3px;
        width: 50px;
        background: #2b3645;
        border-radius: 2px;
    }

    .decorative-lines span:nth-child(2) {
        width: 100px;
        background: #3d4b5d;
    }

    .dex-layout {
        display: flex;
        gap: 2rem;
        margin-top: 2rem;
    }

    .dex-main {
        flex: 1;
    }

    .monster-main-layout {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin: 2rem 0;
        background: rgba(0, 0, 0, 0.2);
        padding: 2rem;
        border-radius: 8px;
    }

    .monster-image-column {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .monster-image-column img {
        max-width: 100%;
        max-height: 600px;
        border-radius: 8px;
        object-fit: contain;
        transition: transform 0.3s ease;
    }

    .monster-image-column img:hover {
        transform: scale(1.05);
    }

    .monster-info-column {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .info-section {
        background: rgba(0, 0, 0, 0.2);
        padding: 1rem;
        border-radius: 5px;
    }

    .info-section h3 {
        margin-top: 0;
        color: #7d8da2;
        margin-bottom: 0.5rem;
    }

    .extra-details-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
    }

    .detail-card {
        background: rgba(0, 0, 0, 0.2);
        padding: 1.5rem;
        border-radius: 8px;
    }

    .detail-card h3 {
        margin-top: 0;
        color: #7d8da2;
        margin-bottom: 1rem;
    }

    .detail-card p {
        margin: 0.5rem 0;
        line-height: 1.4;
    }

    .detail-card strong {
        color: #7d8da2;
    }

    .bio-card {
        grid-column: 1 / -1;
    }

    .types-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .type {
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: bold;
    }

    .attribute-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: bold;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 0.5rem;
    }

    .stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 4px;
    }

    .nav-buttons {
        display: flex;
        justify-content: space-between;
        gap: 1rem;
        width: 100%;
        margin: 1rem 0;
    }

    .nav-button {
        flex: 1;
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background-color: #1e2532;
        color: #ffffff;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.2s;
    }

    .nav-button:hover {
        background-color: #2b3645;
    }

    .nav-button.prev {
        text-align: left;
    }

    .nav-button.next {
        text-align: right;
    }

    /* Type colors */
    .type-normal { background-color: #A8A878; color: #fff; }
    .type-fire { background-color: #F08030; color: #fff; }
    .type-water { background-color: #6890F0; color: #fff; }
    .type-grass { background-color: #78C850; color: #fff; }
    .type-electric { background-color: #F8D030; color: #000; }
    .type-ice { background-color: #98D8D8; color: #000; }
    .type-fighting { background-color: #C03028; color: #fff; }
    .type-poison { background-color: #A040A0; color: #fff; }
    .type-ground { background-color: #E0C068; color: #000; }
    .type-flying { background-color: #A890F0; color: #fff; }
    .type-psychic { background-color: #F85888; color: #fff; }
    .type-bug { background-color: #A8B820; color: #fff; }
    .type-rock { background-color: #B8A038; color: #fff; }
    .type-ghost { background-color: #705898; color: #fff; }
    .type-dragon { background-color: #7038F8; color: #fff; }
    .type-dark { background-color: #705848; color: #fff; }
    .type-steel { background-color: #B8B8D0; color: #000; }
    .type-fairy { background-color: #EE99AC; color: #000; }

    /* Attribute colors */
    .attribute-data { background-color: #3498db; color: #fff; }
    .attribute-vaccine { background-color: #2ecc71; color: #fff; }
    .attribute-virus { background-color: #e74c3c; color: #fff; }
    .attribute-free { background-color: #9b59b6; color: #fff; }
    .attribute-variable { background-color: #f1c40f; color: #000; }

    @media (max-width: 768px) {
        .monster-main-layout {
            grid-template-columns: 1fr;
        }

        .extra-details-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="container">
    <div class="dex-layout">
        <!-- Main Content Area -->
        <div class="dex-main">
            <!-- Navigation Buttons -->
            <div class="nav-buttons">
                <% if (prev_mon) { %>
                <a href="/fakedex/<%= prev_mon.number %>" class="nav-button prev">
                    ← #<%= prev_mon.number %> <%= prev_mon.name %>
                </a>
                <% } else { %>
                <span></span>
                <% } %>

                <% if (next_mon) { %>
                <a href="/fakedex/<%= next_mon.number %>" class="nav-button next">
                    #<%= next_mon.number %> <%= next_mon.name %> →
                </a>
                <% } else { %>
                <span></span>
                <% } %>
            </div>

            <!-- Two Column Layout: Image and Basic Info -->
            <div class="monster-main-layout">
                <!-- Left Column - Large Image -->
                <div class="monster-image-column">
                    <img src="<%= current_mon.image_path %>" alt="<%= current_mon.name %>">
                </div>

                <!-- Right Column - Basic Info -->
                <div class="monster-info-column">
                    <div class="monster-header">
                        <h1>#<%= current_mon.number %> <%= current_mon.name %></h1>
                    </div>

                    <!-- Species -->
                    <div class="info-section">
                        <h3>Classification</h3>
                        <div class="species-container">
                            <span class="species"><%= current_mon.species_class || 'Unknown' %></span>
                        </div>
                    </div>

                    <!-- Types -->
                    <div class="info-section">
                        <h3>Types</h3>
                        <div class="types-container">
                            <% current_mon.types.forEach(function(type) { %>
                            <span class="type type-<%= type.toLowerCase() %>"><%= type %></span>
                            <% }); %>
                        </div>
                    </div>

                    <!-- Attribute -->
                    <div class="info-section">
                        <h3>Attribute</h3>
                        <span class="attribute-badge attribute-<%= current_mon.attribute.toLowerCase() %>"><%= current_mon.attribute %></span>
                    </div>

                    <!-- Stats -->
                    <div class="info-section">
                        <h3>Stats</h3>
                        <div class="stats-grid">
                            <% for (const [stat, value] of Object.entries(current_mon.stats)) { %>
                            <div class="stat">
                                <span class="label"><%= stat.toUpperCase() %>:</span>
                                <span class="value"><%= value %></span>
                            </div>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Extra Details Grid -->
            <div class="extra-details-grid">
                <!-- Physical Characteristics -->
                <div class="detail-card">
                    <h3>Physical Characteristics</h3>
                    <p><strong>Height:</strong> <%= current_mon.height || 'Unknown' %></p>
                    <p><strong>Weight:</strong> <%= current_mon.weight || 'Unknown' %></p>
                </div>

                <!-- Abilities -->
                <div class="detail-card">
                    <h3>Abilities</h3>
                    <% if (current_mon.abilities && current_mon.abilities.length > 0) { %>
                        <% current_mon.abilities.forEach(function(ability) { %>
                        <p><%= ability %></p>
                        <% }); %>
                    <% } else { %>
                        <p>No abilities recorded</p>
                    <% } %>
                </div>

                <!-- Pokédex Entry -->
                <div class="detail-card bio-card">
                    <h3>Pokédex Entry</h3>
                    <p><%= current_mon.pokedex_entry || 'No entry available' %></p>
                </div>

                <!-- Evolution Line -->
                <% if (current_mon.evolution_line && current_mon.evolution_line.length > 0) { %>
                <div class="detail-card bio-card">
                    <h3>Evolution Line</h3>
                    <% current_mon.evolution_line.forEach(function(evo) { %>
                    <p>
                        <strong>#<%= evo.number %> <%= evo.name %></strong>
                        <% if (evo.requirement) { %><br>
                        <em><%= evo.requirement %></em>
                        <% } %>
                    </p>
                    <% }); %>
                </div>
                <% } %>

                <!-- Artist Caption -->
                <% if (current_mon.artist_caption) { %>
                <div class="detail-card bio-card">
                    <h3>Artist's Notes</h3>
                    <p><%= current_mon.artist_caption %></p>
                </div>
                <% } %>
            </div>

            <!-- Bottom Navigation Buttons -->
            <div class="nav-buttons bottom">
                <% if (prev_mon) { %>
                <a href="/fakedex/<%= prev_mon.number %>" class="nav-button prev">
                    ← #<%= prev_mon.number %> <%= prev_mon.name %>
                </a>
                <% } else { %>
                <span></span>
                <% } %>

                <% if (next_mon) { %>
                <a href="/fakedex/<%= next_mon.number %>" class="nav-button next">
                    #<%= next_mon.number %> <%= next_mon.name %> →
                </a>
                <% } else { %>
                <span></span>
                <% } %>
            </div>
        </div>
    </div>
</div>
