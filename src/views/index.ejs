<% /* Set the title and other variables for the layout */ %>
<% title = title || 'Dusk and Dawn' %>

<div class="hero-container">
    <!-- Welcome Image Section -->
    <div class="welcome-section">
        <img src="/images/welcome-image.png" alt="Welcome to Dusk and Dawn - The Monster Collecting Art Roleplaying Game" class="welcome-image" onerror="this.src='https://via.placeholder.com/800x300/1e2532/d6a339?text=Welcome+to+Dusk+and+Dawn'">
    </div>

    <% if (user) { %>
    <div class="welcome-banner">
        <div class="welcome-message">
            <i class="fas fa-hand-sparkles"></i> Welcome back, <%= user.display_name || user.username %>!
        </div>
    </div>
    <% } %>

    <div class="content-grid">

        <!-- Quick Start Sidebar -->
        <aside class="quick-start-sidebar">
            <% if (user) { %>
            <div class="sidebar-section">
                <h2>My Profile</h2>
                <div class="guide-links">
                    <a href="/my_trainers" class="guide-link">
                        <i class="fas fa-users"></i>
                        My Trainers
                    </a>
                    <a href="/manage_schedule" class="guide-link">
                        <i class="fas fa-calendar"></i>
                        My Schedule
                    </a>
                </div>
            </div>
            <% } %>

            <div class="sidebar-section">
                <h2>Quick Start Guide</h2>
                <div class="guide-links">
                    <a href="/documentation" class="guide-link">
                        <i class="fas fa-compass"></i>
                        Documentation Hub
                    </a>
                    <a href="/add_trainer" class="guide-link">
                        <i class="fas fa-user-plus"></i>
                        Create Your Trainer
                    </a>
                    <a href="/adoption_center" class="guide-link">
                        <i class="fas fa-home"></i>
                        Adoption Center
                    </a>
                    <a href="/event_adopts" class="guide-link">
                        <i class="fas fa-star"></i>
                        Event Adopts
                    </a>
                    <a href="/submit_artwork" class="guide-link">
                        <i class="fas fa-paint-brush"></i>
                        Submit Artwork
                    </a>
                </div>
            </div>
        </aside>
        <!-- Main Content -->
        <div class="main-content">
            <!-- Explore World Section -->
            <div class="explore-section world">
                <div class="section-header">
                    <h2>Explore the World</h2>
                    <div class="feature-buttons">
                        <a href="/trainers" class="feature-button">
                            <i class="fas fa-users"></i>
                            View All Trainers
                        </a>
                        <a href="/interactive_map" class="feature-button">
                            <i class="fas fa-map"></i>
                            World Map
                        </a>
                    </div>
                </div>
                <div class="explore-grid">
                    <div class="explore-category">
                        <h3>Guides</h3>
                        <div class="random-items">
                            <% if (categories && categories.guides && categories.guides.structure && categories.guides.structure.directories) { %>
                                <% const guideItems = categories.guides.structure.directories.slice(0, 3); %>
                                <% guideItems.forEach(function(item) { %>
                                    <a href="/guides/<%= item.path %>" class="world-item">
                                        <span><%= item.name %></span>
                                    </a>
                                <% }); %>
                            <% } else { %>
                                <a href="/guides/getting-started" class="world-item">
                                    <span>Getting Started</span>
                                </a>
                            <% } %>
                            <a href="/guides" class="view-all-link">
                                View All Guides <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                    <div class="explore-category">
                        <h3>Locations</h3>
                        <div class="random-items">
                            <% if (categories && categories.locations && categories.locations.structure && categories.locations.structure.directories) { %>
                                <% const locationItems = categories.locations.structure.directories.slice(0, 3); %>
                                <% locationItems.forEach(function(item) { %>
                                    <a href="/locations/<%= item.path %>" class="world-item">
                                        <img src="/images/default_trainer.png" alt="<%= item.name %>">
                                        <span><%= item.name %></span>
                                    </a>
                                <% }); %>
                            <% } else { %>
                                <a href="/locations" class="world-item">
                                    <img src="/images/default_trainer.png" alt="Locations">
                                    <span>Explore Locations</span>
                                </a>
                            <% } %>
                            <a href="/locations" class="view-all-link">
                                View All Locations <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                    <div class="explore-category">
                        <h3>Factions</h3>
                        <div class="random-items">
                            <% if (categories && categories.factions && categories.factions.structure && categories.factions.structure.directories) { %>
                                <% const factionItems = categories.factions.structure.directories.slice(0, 3); %>
                                <% factionItems.forEach(function(item) { %>
                                    <a href="/factions/<%= item.path %>" class="world-item">
                                        <img src="/images/default_trainer.png" alt="<%= item.name %>">
                                        <span><%= item.name %></span>
                                    </a>
                                <% }); %>
                            <% } else { %>
                                <a href="/factions" class="world-item">
                                    <img src="/images/default_trainer.png" alt="Factions">
                                    <span>Explore Factions</span>
                                </a>
                            <% } %>
                            <a href="/factions" class="view-all-link">
                                View All Factions <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fakemon Section -->
            <div class="explore-section fakemon">
                <div class="section-header">
                    <h2>Discover Fakemon</h2>
                    <a href="/fakedex" class="feature-button">
                        <i class="fas fa-book"></i>
                        Open Fakedex
                    </a>
                </div>
                <div class="fakemon-gallery">
                    <% if (typeof randomFakemon !== 'undefined' && randomFakemon.length > 0) { %>
                        <% randomFakemon.forEach(function(mon) { %>
                        <a href="/fakedex/<%= mon.number %>" class="fakemon-card">
                            <img src="<%= mon.image_path %>" alt="<%= mon.name %>" onerror="this.src='/images/default_mon.png'">
                            <div class="fakemon-info">
                                <span class="dex-number">#<%= mon.number %></span>
                                <span class="dex-name"><%= mon.name %></span>
                                <div class="types-container">
                                    <% mon.types.forEach(function(type) { %>
                                    <span class="type type-<%= type.toLowerCase() %>"><%= type %></span>
                                    <% }); %>
                                </div>
                                <div class="attribute-container">
                                    <span class="attribute-badge attribute-<%= mon.attribute.toLowerCase() %>"><%= mon.attribute %></span>
                                </div>
                            </div>
                        </a>
                        <% }); %>
                    <% } else { %>
                        <div class="text-center py-8">
                            <p class="text-xl mb-4">No fakemon found</p>
                            <p class="text-[#9ca3af]">Check back later for exciting fakemon!</p>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .hero-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
    }

    .welcome-section {
        text-align: center;
        margin-bottom: 2rem;
    }

    .welcome-banner {
        background: linear-gradient(to right, #1e2532, #2b3645);
        border-left: 4px solid #d6a339;
        padding: 1rem 2rem;
        margin-bottom: 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .welcome-message {
        color: #d7ddf3;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .welcome-message i {
        color: #d6a339;
    }

    .welcome-image {
        max-width: 50%;
        height: auto;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .content-grid {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 2rem;
        margin-top: 2rem;
    }

    /* Quick Start Sidebar Styles */
    .quick-start-sidebar {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .sidebar-section {
        background: #1e2532;
        padding: 1.5rem;
        border-radius: 15px;
        height: fit-content;
    }

    .sidebar-section h2 {
        color: #d6a339;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #2b3645;
    }

    .guide-links {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .guide-link {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.8rem;
        background: #2b3645;
        border-radius: 8px;
        color: #d7ddf3;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .guide-link:hover {
        background: #3c4b61;
        transform: translateX(5px);
    }

    /* Main Content */
    .main-content {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .explore-section {
        background: #1e2532;
        padding: 1.5rem;
        border-radius: 15px;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #2b3645;
    }

    .section-header h2 {
        color: #d6a339;
        margin: 0;
    }

    /* World Exploration Styles */
    .explore-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
    }

    .explore-category h3 {
        color: #d7ddf3;
        margin-bottom: 1rem;
    }

    .random-items {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
    }

    .world-item {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.8rem;
        background: #2b3645;
        border-radius: 8px;
        color: #d7ddf3;
        text-decoration: none;
        transition: transform 0.3s ease;
    }

    .world-item:hover {
        transform: translateY(-3px);
        background: #3c4b61;
    }

    .world-item img {
        width: 32px;
        height: 32px;
        border-radius: 4px;
    }

    .view-all-link {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 1rem;
        padding: 0.8rem;
        background: #d6a339;
        color: #1e2532;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s ease;
    }

    .view-all-link:hover {
        background: #e6b349;
    }

    /* Fakemon Gallery Styles */
    .fakemon-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 1rem;
    }

    .fakemon-card {
        background: #2b3645;
        border-radius: 8px;
        padding: 1rem;
        text-decoration: none;
        transition: transform 0.3s ease;
    }

    .fakemon-card:hover {
        transform: translateY(-5px);
    }

    .fakemon-card img {
        width: 100%;
        height: 150px;
        border-radius: 5px;
        margin-bottom: 1rem;
        object-fit: contain;
    }

    .fakemon-info {
        color: #d7ddf3;
    }

    .dex-number {
        color: #d6a339;
        font-size: 0.8rem;
    }

    .dex-name {
        display: block;
        margin: 0.2rem 0;
    }

    .types-container {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }

    .attribute-container {
        display: flex;
        margin-top: 0.3rem;
    }

    .type {
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-size: 0.8rem;
    }

    .attribute-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: bold;
    }

    .feature-buttons {
        display: flex;
        gap: 1rem;
    }

    .feature-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: #d6a339;
        color: #1e2532;
        padding: 0.8rem 1.5rem;
        border-radius: 25px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s ease;
    }

    .feature-button:hover {
        background: #e6b349;
    }

    /* Type Colors */
    .type-normal { background-color: #A8A878; }
    .type-fire { background-color: #F08030; }
    .type-water { background-color: #6890F0; }
    .type-electric { background-color: #F8D030; }
    .type-grass { background-color: #78C850; }
    .type-ice { background-color: #98D8D8; }
    .type-fighting { background-color: #C03028; }
    .type-poison { background-color: #A040A0; }
    .type-ground { background-color: #E0C068; }
    .type-flying { background-color: #A890F0; }
    .type-psychic { background-color: #F85888; }
    .type-bug { background-color: #A8B820; }
    .type-rock { background-color: #B8A038; }
    .type-ghost { background-color: #705898; }
    .type-dragon { background-color: #7038F8; }
    .type-dark { background-color: #705848; }
    .type-steel { background-color: #B8B8D0; }
    .type-fairy { background-color: #EE99AC; }

    /* Attribute colors */
    .attribute-data { background-color: #3498db; color: #fff; }
    .attribute-vaccine { background-color: #2ecc71; color: #fff; }
    .attribute-virus { background-color: #e74c3c; color: #fff; }
    .attribute-free { background-color: #9b59b6; color: #fff; }
    .attribute-variable { background-color: #f1c40f; color: #000; }

    @media (max-width: 1024px) {
        .content-grid {
            grid-template-columns: 1fr;
        }

        .explore-grid {
            grid-template-columns: 1fr;
        }

        .welcome-image {
            max-width: 80%;
        }
    }

    @media (max-width: 768px) {
        .feature-buttons {
            flex-direction: column;
            gap: 0.5rem;
        }

        .section-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .fakemon-gallery {
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }
    }
</style>